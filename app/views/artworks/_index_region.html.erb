<section id="author" class="bg-light-gray">
<div class="container">
    <div class="row">
      <div class="col-lg-12 text-center">
        <h2 class="section-heading">Obras por Regiones</h2>
        <h3 class="section-subheading text-muted">Lorem ipsum dolor sit amet consectetur.</h3>
      </div>
    </div>

  <!-- Seccion de filtros-->
  <div class="col-md-2">

    <div class="well">
      <h4>Artistas</h4>
      <div class="row">
        <div class="col-lg-6">
          <ul class="list-unstyled">
            <% @authors.values.each  do |author| %>
                <li>
                  <%=	link_to  "#{author.name}" ,artworks_path(:params => params.merge(:author => author.id))  %>
                </li>
            <% end %>
            </li>
          </ul>
        </div>
        <!-- /.col-lg-6 -->
      </div>
      <!-- /.row -->
    </div>

    <div class="well">
      <h4>Clasificaci√≥n</h4>
      <div class="row">
        <div class="col-lg-6">
          <ul class="list-unstyled">
            <% @clasifications.values.each  do |objeto| %>
                <li>
                  <%=	link_to  "#{objeto.name}" ,artworks_path(:params => params.merge(:category => objeto.id))  %>
                </li>
            <% end %>
            </li>
          </ul>
        </div>
        <!-- /.col-lg-6 -->
      </div>
      <!-- /.row -->
    </div>

    <div class="well">
      <h4>Lugares</h4>
      <div class="row">
        <div class="col-lg-6">
          <ul class="list-unstyled">
            <% @places.values.each  do |objeto| %>
                <li>
                  <%=	link_to  "#{objeto.name}" ,artworks_path(:params => params.merge(:place => objeto.id))  %>
                </li>
            <% end %>
            </li>
          </ul>
        </div>
        <!-- /.col-lg-6 -->
      </div>
      <!-- /.row -->
    </div>
  </div>


  <div class="row">
            <div id="world-map" style="width: 650px; height: 635px; margin-left: auto;margin-right: auto"></div>
    </div>
    <script>

        var jsonData = <%= @json_places.to_json.html_safe %>;

        $(function(){
            map = $('#world-map').vectorMap({
                        series: {
                            regions: [{
                                values: jsonData,
                                scale: ['#C8EEFF', '#0071A4'],
                                normalizeFunction: 'polynomial'
                            }]
                        },
                        onRegionTipShow: function(e, el, code){
                            var map = $('#world-map').vectorMap('get', 'mapObject');
                            var obras;
                            obras = (jsonData[code]) ? jsonData[code] : 0;
                            el.html(el.html()+' ('+'Obras: '+obras+')');
                        },
                        focusOn:
                        {
                            x: -1.5,
                            y: 0.5,
                            scale: 2
                        },
                        onRegionClick: function (event, code) {
                            var map = $('#world-map').vectorMap('get', 'mapObject');
                            var regionName = map.getRegionName(code);
                            window.location.href = "artworks?region_show=" + regionName
                        }
                    }
            );
        });
    </script>
</div>
</section>
