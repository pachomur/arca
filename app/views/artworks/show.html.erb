<%- model_class = Artwork -%>

<div class="row">
  <div class="col-lg-12">
    <h1 class="page-header"><%= @artwork.title %>
      <small><%= @artwork.category_1.name%></small>
    </h1>
  </div>
</div>

<div class="row">
  <div class="col-sm-3">
    <a type="href" data-toggle="modal" data-target="#imageModal" href="">
      <%= image_tag(@artwork.avatar.url(:large), :class => "img-thumbnail", :class => "img-responsive", :style => "margin-left: auto; margin-right: auto;") %>
    </a>
  </div>
  <div class="col-sm-9">
    <ul class="nav nav-tabs">
      <li class="active"><a href="#datos_generales" data-toggle="tab" aria-expanded="false">Datos generales</a></li>
      <li class=""><a href="#desc_img_rel" data-toggle="tab" aria-expanded="false">Descripción, Imagenes y relatos</a></li>
      <li class=""><a href="#personajes" data-toggle="tab" aria-expanded="false">Personajes</a></li>
      <li class=""><a href="#cuerpo_gestos" data-toggle="tab" aria-expanded="false">Cuerpo y gestos</a></li>
      <li class=""><a id="mapTab" href="#location" data-toggle="tab" aria-expanded="false">Lugar</a></li>
    </ul>
    <br>
    <div id="myTabContent" class="tab-content">
      <div class="tab-pane fade active in" id="datos_generales">
        <div class="row">
          <div class="col-md-6">
            <div class="row">
              <label class="control-label col-sm-2">Titulo</label>
              <div class="col-sm-10"><%= @artwork.title%></div>
            </div>
            <div class="row">
              <label class="control-label col-sm-2">Autor</label>
              <div class="col-sm-10"><%=@artwork.author.name%></div>
            </div>
            <div class="row">
              <label class="control-label col-sm-2">Actividad</label>
              <div class="col-sm-10"><%=@artwork.activity%></div>
            </div>
            <div class="row">
              <label class="control-label col-sm-2">Información Biográfica</label>
              <div class="col-sm-10"><%=@artwork.biographic_data%></div>
            </div>
            <div class="row">
              <label class="control-label col-sm-2">Firmado</label>
              <div class="col-sm-10"><%=@artwork.signed%></div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="row">
              <label class="control-label col-sm-3">Categoría 1</label>
              <div class="col-sm-9"><%=@artwork.category_1%></div>
            </div>
            <div class="row">
              <label class="control-label col-sm-3">Categoría 2</label>
              <div class="col-sm-9"><%=@artwork.category_2%></div>
            </div>
            <div class="row">
              <label class="control-label col-sm-3">Categoría 3</label>
              <div class="col-sm-9"><%=@artwork.category_3%></div>
            </div>
            <div class="row">
              <label class="control-label col-sm-3">Categoría 4</label>
              <div class="col-sm-9"><%=@artwork.category_4%></div>
            </div>
            <div class="row">
              <label class="control-label col-sm-3">Categoría 5</label>
              <div class="col-sm-9"><%=@artwork.category_5%></div>
            </div>
          </div>
        </div>
        <br>
        <div class="row">
          <div class="col-md-6">
            <div class="row">
              <label class="control-label col-sm-2">Tipo</label>
              <div class="col-sm-10"><%=@artwork.type%></div>
            </div>
            <div class="row">
              <label class="control-label col-sm-2">Fuente</label>
              <div class="col-sm-10"><%=@artwork.source%></div>
            </div>
            <div class="row">
              <label class="control-label col-sm-2">Lugar</label>
              <div class="col-sm-10"><%=@artwork.place%></div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="row">
              <label class="control-label col-sm-2">Escuela</label>
              <div class="col-sm-10"><%=@artwork.school%></div>
            </div>
            <div class="row">
              <label class="control-label col-sm-2">Origen</label>
              <div class="col-sm-10"><%=@artwork.origin%></div>
            </div>
          </div>
        </div>
        <br>
        <div class="row">
          <div class="col-md-6">
            <div class="row">
              <label class="control-label col-sm-2">Sintesis</label>
              <div class="col-sm-10"><%=@artwork.synthesis%></div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="row">
              <label class="control-label col-sm-2">Comentario Biográfico</label>
              <div class="col-sm-10"><%=@artwork.biographic_comment%></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<br>

<%= link_to t('.back', :default => t("helpers.links.back")),
            artworks_path(@artwork,:parent_id => @artwork.category_1.id) , :class => 'btn btn-default' %>
<%= link_to t('.edit', :default => t("helpers.links.edit")),
            edit_artwork_path(@artwork,:parent_id => @artwork.category_1.id) , :class => 'btn btn-default' %>
<%= link_to t('.destroy', :default => t("helpers.links.destroy")),
            artwork_path(@artwork,:parent_id => @artwork.category_1.id) ,
            :method => 'delete',
            :data => {:confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?'))},
            :class => 'btn btn-danger' %>

<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDY0kkJiTPVd2U7aTOAwhc9ySH6oHxOIYM&sensor=false">
</script>

<script>
    function initialize() {
        infowindow = new google.maps.InfoWindow();
        var myLatlngOrigin = new google.maps.LatLng(<%= @artwork.latitude_origin %>,<%= @artwork.longitude_origin %>);
        var myLatlngCurrent = new google.maps.LatLng(<%= @artwork.latitude_current %>,<%= @artwork.longitude_current %>);

        var mapProp = {
            center: myLatlngOrigin,
            zoom: 6,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("googleMap"), mapProp);
        $("#mapTab").on('shown.bs.tab', function() {

            /* Trigger map resize event */
            google.maps.event.trigger(map, 'resize');
            map.setCenter(myLatlngOrigin);
        });

        $("#googleMap").css("width", '100%').css("height", 400);
        var marker = new google.maps.Marker({
            position: myLatlngOrigin,
            map: map,
            title: 'Ubicación de origen'
        });
        var markerCurrent = new google.maps.Marker({
            position: myLatlngCurrent,
            map: map,
            title: 'Ubicación current'
        });

        google.maps.event.addListener(marker, 'click', function () {
            onItemClick(event, marker);
            onItemClick(event, markerCurrent);

        });

        function onItemClick(event, marker) {
            // Create content
            var contentString = marker.title;

            // Replace our Info Window's content and position
            infowindow.setContent(contentString);
            infowindow.setPosition(marker.position);
            infowindow.open(map);
        }
    }
    google.maps.event.addDomListener(window, 'load', initialize);
</script>

<% content_for :css_application do %>
    <%= stylesheet_link_tag "artworks_show" %>
<% end %>