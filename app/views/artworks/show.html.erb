<%- model_class = Artwork -%>

<div class="row">
  <div class="col-lg-12">
    <h1 class="page-header"><%= @artwork.title %>
      <small><%= @artwork.category_1.name%></small>
    </h1>
  </div>
</div>


<ul class="nav nav-tabs">
  <li class="active"><a href="#atributos" data-toggle="tab" aria-expanded="false">Atributos</a></li>
  <li class=""><a href="#categorias" data-toggle="tab" aria-expanded="false">Categorías</a></li>
  <li class=""><a href="#extra" data-toggle="tab" aria-expanded="false">Atributos extra</a></li>
  <li class=""><a href="#imagen" data-toggle="tab" aria-expanded="false">Imagen</a></li>
  <li class=""><a id="mapTab" href="#location" data-toggle="tab" aria-expanded="false">Lugar</a></li>
</ul>
<div id="myTabContent" class="tab-content">

  <div class="tab-pane fade active in" id="atributos">

    <% if @artwork.descriptions.count > 0 %>
        <dt><strong>Descripción:</strong></dt>
        <% @artwork.descriptions.each do |descripton| %>
            <dd><%= descripton.description %></dd>
        <% end %>
    <% end %>


    <!-- Projects Row -->
    <div class="row">

      <div class="col-md-3 portfolio-item">
        <h4>
          Autor
        </h4>
        <p>
          <%=@artwork.author.name %>
        </p>
      </div>

      <div class="col-md-3 portfolio-item">
        <h4>
          Actividad
        </h4>
        <p>
          <%=@artwork.activity %>
        </p>
      </div>

      <div class="col-md-3 portfolio-item">
        <h4>
          Información biografica
        </h4>
        <p>
          <%=@artwork.biographic_data %>
        </p>
      </div>

      <div class="col-md-3 portfolio-item">
        <h4>
          Firmado
        </h4>
        <p>
          <%=@artwork.signed %>
        </p>
      </div>

    </div>

    <div class="row">

      <div class="col-md-3 portfolio-item">
        <h4>
          Sintesis
        </h4>
        <p>
          <%=@artwork.synthesis %>
        </p>
      </div>

      <div class="col-md-3 portfolio-item">
        <h4>
          Comentarios biograficos
        </h4>
        <p>
          <%=@artwork.biographic_comment %>
        </p>
      </div>

      <div class="col-md-3 portfolio-item">
        <h4>
          Anotaciones
        </h4>
        <p>
          <%=@artwork.annotation %>
        </p>
      </div>

      <div class="col-md-3 portfolio-item">
        <h4>
          Sub imagen
        </h4>
        <p>
          <%=@artwork.sub_image %>
        </p>
      </div>

    </div>

    <div class="row">

      <div class="col-md-5 portfolio-item">
        <h4>
          Comentarios
        </h4>
        <p>
          <%=@artwork.comment %>
        </p>
      </div>

    </div>

  </div>

  <div class="tab-pane fade" id="categorias">
      <div class="row">

        <div class="col-md-3 portfolio-item">
          <h4>
            Categoria 1
          </h4>
          <p>
            <%=@artwork.category_1.name %>
          </p>
        </div>

        <div class="col-md-3 portfolio-item">
          <h4>
            Categoria 2
          </h4>
          <p>
            <%=@artwork.category_2.name unless !@artwork.category_2 %>
          </p>
        </div>

        <div class="col-md-3 portfolio-item">
          <h4>
            Categoria 3
          </h4>
          <p>
            <%=@artwork.category_3.name unless !@artwork.category_3 %>
          </p>
        </div>

        <div class="col-md-3 portfolio-item">
          <h4>
            Categoria 4
          </h4>
          <p>
            <%=@artwork.category_4.name unless !@artwork.category_4 %>
          </p>
        </div>

      </div>
      <!-- Projects Row -->
      <div class="row">
        <div class="col-md-3 portfolio-item">
          <h4>
            Categoria 5
          </h4>
          <p>
            <%=@artwork.category_5.name unless !@artwork.category_5 %>
          </p>
        </div>
      </div>
      <br>
      <br>
  </div>
  <div class="tab-pane fade" id="extra">

    <!-- Projects Row -->
    <div class="row">

      <div class="col-md-3 portfolio-item">
        <h4>
          Actividad
        </h4>
        <p>
          <%=@artwork.activity %>
        </p>
      </div>

      <div class="col-md-3 portfolio-item">
        <h4>
          Información biografica
        </h4>
        <p>
          <%=@artwork.biographic_data %>
        </p>
      </div>

      <div class="col-md-3 portfolio-item">
        <h4>
          Firmado
        </h4>
        <p>
          <%=@artwork.signed %>
        </p>
      </div>

      <div class="col-md-3 portfolio-item">
        <h4>
          Sintesis
        </h4>
        <p>
          <%=@artwork.synthesis %>
        </p>
      </div>
    </div>

    <div class="row">

      <div class="col-md-3 portfolio-item">
        <h4>
          Comentarios biograficos
        </h4>
        <p>
          <%=@artwork.biographic_comment %>
        </p>
      </div>

      <div class="col-md-3 portfolio-item">
        <h4>
          Antaciones
        </h4>
        <p>
          <%=@artwork.annotation %>
        </p>
      </div>

      <div class="col-md-3 portfolio-item">
        <h4>
          Sub imagen
        </h4>
        <p>
          <%=@artwork.sub_image %>
        </p>
      </div>

      <div class="col-md-3 portfolio-item">
        <h4>
          Comentarios
        </h4>
        <p>
          <%=@artwork.comment %>
        </p>
      </div>
    </div>

  </div>

  <div class="tab-pane fade" id="imagen">
    <%= image_tag @artwork.avatar.url(:large), :class => "img-thumbnail", :class => "img-responsive" %>
    <%= form_for @artwork, :url => {:action => "send_image"} do |f| %>
        <%= f.hidden_field :id, :value => @artwork.id %>
        <%= f.submit "Download original", class: "btn btn-primary btn-sm", style: "margin-top: 1em;" %>
    <% end %>
  </div>
  <div class="tab-pane fade" id="location">
    <div id="googleMap" style="width:900;height:340px;"></div>
  </div>

</div>
<br>

<%= link_to t('.back', :default => t("helpers.links.back")),
            artworks_path(@artwork,:parent_id => @artwork.category_1.id) , :class => 'btn btn-default' %>
<%= link_to t('.edit', :default => t("helpers.links.edit")),
            edit_artwork_path(@artwork,:parent_id => @artwork.category_1.id) , :class => 'btn btn-default' %>
<%= link_to t('.destroy', :default => t("helpers.links.destroy")),
            artwork_path(@artwork,:parent_id => @artwork.category_1.id) ,
            :method => 'delete',
            :data => {:confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?'))},
            :class => 'btn btn-danger' %>

<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDY0kkJiTPVd2U7aTOAwhc9ySH6oHxOIYM&sensor=false">
</script>

<script>
    function initialize() {
        infowindow = new google.maps.InfoWindow();
        var myLatlngOrigin = new google.maps.LatLng(<%= @artwork.latitude_origin %>,<%= @artwork.longitude_origin %>);
        var myLatlngCurrent = new google.maps.LatLng(<%= @artwork.latitude_current %>,<%= @artwork.longitude_current %>);

        var mapProp = {
            center: myLatlngOrigin,
            zoom: 6,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("googleMap"), mapProp);
        $("#mapTab").on('shown.bs.tab', function() {

            /* Trigger map resize event */
            google.maps.event.trigger(map, 'resize');
            map.setCenter(myLatlngOrigin);
        });

        $("#googleMap").css("width", '100%').css("height", 400);
        var marker = new google.maps.Marker({
            position: myLatlngOrigin,
            map: map,
            title: 'Ubicación de origen'
        });
        var markerCurrent = new google.maps.Marker({
            position: myLatlngCurrent,
            map: map,
            title: 'Ubicación current'
        });

        google.maps.event.addListener(marker, 'click', function () {
            onItemClick(event, marker);
            onItemClick(event, markerCurrent);

        });

        function onItemClick(event, marker) {
            // Create content
            var contentString = marker.title;

            // Replace our Info Window's content and position
            infowindow.setContent(contentString);
            infowindow.setPosition(marker.position);
            infowindow.open(map)
        }
    }
    google.maps.event.addDomListener(window, 'load', initialize);
</script>

<% content_for :css_application do %>
    <%= stylesheet_link_tag "artworks_show" %>
<% end %>